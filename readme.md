# Meanbee Config Powered CSS Magento Extension

The aim of this extension is to provide magento frontend developers with a performant way of modifying page styles that are dependent on settings in admin. 

E.g. background images on a product page (with retina versions) that can be uploaded in admin.  Avoid inline style blocks and instead be able to output a CSS file. 

## Requirements

The user stories that this extension should achieve and maintain are as follows.

- As a store owner, I wish to be able to upload images in admin that change the site design.
- As a developer, I wish to providing retina images to website visitors and maintaining a performant system, i.e. minimise inline styles and HTTP requests.

## Technical Requirements

- Add a CSS file to head block
    - CSS file must not exist in repository.
- Trigger CSS File Regeneration
    - The CSS file should be generated on clicking of "Publish" button in system configuration or cache management.
        - We did talk about it regenerating on an event fired during system configuration saved.  With this, we'd need to know how to restrict to only when there have been changes to relevant configuration has been made.  It also has the slight disadvantage if you wish to separate the upload with the publishing changes event. Dubious whether this matters to us. 
- Generates CSS File
    - CSS file should be in a directory which can be written to be the web. 
        - Core CSS merging functionality requires file to be in JS folder (static) or skin directory (design fallback).
    - CSS file will be plain CSS and will have no interaction with build tools.
    - CSS file will be generated with a custom block and template. 
        - Each theme can then have itâ€™s own template file.
        - This means the CSS would need regenerating if theme was changed on the store. 
    - The template will use getStoreConfig calls (supported by block function)
    - The base/default template will show a commented out example, e.g. logo. 
- The CSS should be generated by clicking a button in admin.  
    - Doing it on page load could be difficult to know which page loads require regeneration and we don't wish to perform the regeneration on every page load.
- There should be a different CSS file for each store to accommodate changing values on different store views.
    - This puts a challenge on whether the CSS file can be added in the theme local.xml file because you would need to add a CSS file depending on what store view you were in.

## Development Setup

This extension provides a modman file for further development.  [Modman](https://github.com/colinmollenhour/modman) is an easy way to install magento extensions via symlink. 

	modman init
    modman clone git@bitbucket.org:meanbee/magento-config-powered-css.git


## Components

